<div class="page-head">
    <ol class="breadcrumb">
        <li>{% templatetag openvariable %}'search_findings.page_head.breadcrumb.project' | translate {% templatetag closevariable %}</li>
        <li><a class="text-uppercase">{% templatetag openvariable %} project {% templatetag closevariable %}</a></li>
    </ol>
    <div id="header_alert"></div>
    <div class="text-center">
        <!-- Start SearchBox -->
        <div class="row">
            <div class="col-md-4 col-md-offset-3">
                <input class="form-control text-center text-uppercase" ng-model="project" id="project" placeholder="{% templatetag openvariable %} 'search_findings.filter_menu.search.placeholder' | translate {% templatetag closevariable %}">
            </div>
            <div class="col-md-1">
                <button class="btn btn-primary form-control" id="search" ng-click="search();" title="{% templatetag openvariable %} 'search_findings.filter_menu.search.button' | translate {% templatetag closevariable %}">
                    <i class="glyphicon glyphicon-search"></i>&nbsp;</button>
            </div>
        </div>
        <!-- End SearchBox -->
    </div>
</div>
<!-- START: MODAL AVANCE -->
<script type="text/ng-template" id="avance.html">
    <div class="modal-header">
        <h3 class="modal-title" id="modal-title">{% templatetag openvariable %} 'progress_mod.title' | translate {% templatetag closevariable %}</h3>
    </div>
    <div class="modal-body" id="modal-body">
        <ul style="list-style: none;">
            <li ng-repeat="r in rows"> - {% templatetag openvariable %} 'progress_mod.finding' | translate {% templatetag closevariable %} #<a href="{% templatetag openvariable %} r.link {% templatetag closevariable %}">{% templatetag openvariable %} r.id {% templatetag closevariable %}</a>:&nbsp;[{% templatetag openvariable %} r.criticidad {% templatetag closevariable %}&nbsp;CVSS]&nbsp;{% templatetag openvariable %} r.hallazgo {% templatetag closevariable %}&nbsp;({% templatetag openvariable %} r.cardinalidad {% templatetag closevariable %})&nbsp;->&nbsp;[{% templatetag openvariable %} r.registros_num {% templatetag closevariable %},&nbsp;{% templatetag openvariable %} r.atributos {% templatetag closevariable %}]
        </ul>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="closeModalAvance()">OK</button>
    </div>
</script>
<!-- START: MODAL TECNICO -->
<script type="text/ng-template" id="technicalReportModal.html">
    <div class="modal-header">
        <h3 class="modal-title" id="modal-title">{% templatetag openvariable %} 'technical_report_mod.title' | translate {% templatetag closevariable %}</h3>
    </div>
    <div class="modal-body" id="modal-body" style="padding-top:1px!important; color:red;">
        <p class='text-center'>{% templatetag openvariable %} 'technical_report_mod.body_1' | translate {% templatetag closevariable %}</p>
        <p class='text-center'>{% templatetag openvariable %} 'technical_report_mod.body_2' | translate {% templatetag closevariable %}</p>
        <button class="btn btn-success" ng-click="findingMatrizXLSReport();">XLS</button>
        <button class="btn btn-danger" ng-click="findingMatrizPDFReport();">PDF</button>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="closeModalAvance()">OK</button>
    </div>
</script>
<!-- START: MODAL EJECUTIVO -->
<script type="text/ng-template" id="executiveReportModal.html">
    <div class="modal-header">
        <h3 class="modal-title" id="modal-title"><i class="fa fa-file-pdf-o" aria-hidden="true"></i>{% templatetag openvariable %} 'executive_report_mod.title' | translate {% templatetag closevariable %}</h3>
    </div>
    <div class="modal-body text-center" id="modal-body">
        <p class='text-center' id="hasPresentationMsg">{% templatetag openvariable %} 'executive_report_mod.message' | translate {% templatetag closevariable %}</p>
        <!--<button class="btn btn-danger" ng-click="findingMatrizPDFReport();"><i class="fa fa-file-pdf-o"></i>PDF</button>-->
        <button class="btn btn-danger" id="hasPresentation" style='display:none;' ng-click="findingMatrizPDFPresentation();"><i class="fa fa-file-powerpoint-o
"></i> PDF</button>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="closeModalAvance()">OK</button>
    </div>
</script>                    
<div class="main-content" ng-show="view.project" style="background-color: white;">
    <div class="row">
        <div class="col-md-12" id="search_section">
            <div class="row">
                <div class="tab-container">
                    <ul class="nav pills-tabs nav-justified" style="background-color: white; border-bottom: 1px #eee solid;">
                        <!-- <li id="indicatorsTab" class="active" style="font-size:15px;" ui-sref="Forms" ng-click="urlIndicators();"> -->
                        <li id="indicatorsTab" class="" style="font-size:15px;" ng-click="urlIndicators();">
                            <a href="#indicators" data-toggle="tab" aria-expanded="false">
                                <i class="icon s7-graph3"></i>&nbsp; {% templatetag openvariable %} 'tab_container.indicators' | translate {% templatetag closevariable %}
                            </a>
                        </li>
                        <li id="findingsTab" class="active" style="font-size:15px;" ng-click="urlFindings();">
                            <a href="#findings" data-toggle="tab" aria-expanded="false">
                                <i class="icon s7-light"></i>&nbsp;{% templatetag openvariable %} 'tab_container.findings' | translate {% templatetag closevariable %}
                            </a>
                        </li>
                        <li id="eventsTab" class="" style="font-size:15px;" ng-click="urlEvents();">
                            <a href="#eventualities" data-toggle="tab" aria-expanded="true">
                                <i class="icon s7-star"></i>&nbsp;{% templatetag openvariable %} 'tab_container.eventualities' | translate {% templatetag closevariable %}
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="findings" class="tab-pane cont active">
                            <div class="btn-group" >
                                <script>
                                    $(document).ready(function() {
                                        if (userRole == "customer") {
                                            $('#progress_button').hide();
                                        }
                                    });
                                </script>
                                <button type="button" id="progress_button" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="{% templatetag openvariable %} 'search_findings.filter_buttons.advance' | translate {% templatetag closevariable %}!" ng-click="openModalAvance();">
                                    {% templatetag openvariable %} 'search_findings.filter_buttons.advance' | translate {% templatetag closevariable %} <i class="glyphicon glyphicon-bookmark"></i>
                                </button>
                                <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="{% templatetag openvariable %} 'search_findings.filter_buttons.documentation' | translate {% templatetag closevariable %}" ng-click="technicalReportModal();">
                                    {% templatetag openvariable %} 'technical_report_mod.title' | translate {% templatetag closevariable %} <i class="glyphicon glyphicon-th-list"></i>
                                </button>
                                <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="{% templatetag openvariable %} 'search_findings.filter_buttons.documentation' | translate {% templatetag closevariable %}" ng-click="executiveReportModal();">
                                    {% templatetag openvariable %} 'executive_report_mod.title' | translate {% templatetag closevariable %} &nbsp;<i class="glyphicon glyphicon-briefcase"></i>
                                </button>
                            </div>
                            <!-- START: toolbar -->
                            <div id="toolbar" style="padding-top: 5%;">
                              <p>{% templatetag openvariable %} 'search_findings.descriptions.description1' | translate {% templatetag closevariable %} <b>{% templatetag openvariable %} 'search_findings.descriptions.description2' | translate {% templatetag closevariable %}</b> {% templatetag openvariable %} 'search_findings.descriptions.description3' | translate {% templatetag closevariable %}</p>
                            </div>

                            <table id="vulnerabilities"
                                   data-click-to-select="true"
                                   data-classes="table table-hover table-striped"
                                   data-striped="true"
                                   data-show-columns="true"
                                   data-cookie="true"
                                   data-cookie-id-table="saveId"
                                   data-show-export="true"
                                   data-export-types="['sql', 'excel']"
                                   data-pagination="true"
                                   data-search="true"
                                   data-page-size="15"
                                   data-toolbar="#toolbar">
                                <thead>
                                    <tr class="head-blue" style="background-color: #0361cc; color:white;">
                                        <th data-field="timestamp"
                                            data-sortable="true"
                                            data-width="5%"
                                            data-formatter="removeHour"
                                            data-visible="false">
                                            {% templatetag openvariable %} 'search_findings.table.headings.timestamp' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="edad"
                                            data-align="center"
                                            data-width="5%"
                                            data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.age' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="tipo_hallazgo_cliente" data-width="5%" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.type' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="hallazgo" data-width="15%" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.finding' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="vulnerabilidad" data-width="40%" style="display:none;">
                                            {% templatetag openvariable %} 'search_findings.table.headings.vulnerability' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="criticidad" data-width="5%" data-align="center" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.criticity' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="cardinalidad" data-width="5%" data-align="center" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.cardinality' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="estado" data-width="5%" data-sortable="true" data-formatter="labelState">
                                            {% templatetag openvariable %} 'search_findings.table.headings.state' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="tratamiento" data-width="5%" data-align="center" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.treatment' | translate {% templatetag closevariable %}
                                        </th>
                                        <th data-field="explotable" data-width="5%" data-align="center" data-sortable="true">
                                            {% templatetag openvariable %} 'search_findings.table.headings.exploit' | translate {% templatetag closevariable %}
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Start CommonStyles -->
<style>
    .bg-critical{ background-color: #F12; }
    .bg-moderate{ background-color: #F72; }
    .bg-tolerable{ background-color: #FD2; }
    .no-resize{ resize: none; height: 100px !important;}
    .hide-detallado, .fl-hidden { display: none; }
    .show-detallado, .fl-visible{ display: block;}
    .pills-tabs > li.active > a,
    .pills-tabs > li.active > a:hover,
    .pills-tabs > li.active > a:focus{
        background-color: #eee;
        color: #777;
    }
    .pills-tabs > li > a,
    .pills-tabs > li > a:hover,
    .pills-tabs > li > a:focus{
        background-color: white;
        color: #666;
    }
    .table-head{
        text-align: right;
    }
    @media (max-width: 768px) {
        .table-head{
            text-align: left;
        }
    }
    .table-row{
        margin-top: 15px;
        font-size: 14px;
    }
    .table-desc{
        color: #888;
        text-align: justify;
        /*border-bottom: 0.5px #DDD solid;*/
    }
    #vulnerabilities thead tr{ background-color: #337ab7; color:white;  }
    #eventualities thead tr{ background-color: #337ab7; color:white;  }

</style>
<!-- End CommonStyles -->